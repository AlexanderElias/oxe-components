/*
	Name: oxe
	Version: 3.12.0
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elis@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var a,r=0;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";function t(e,t){if(e&&"AsyncFunction"===e.constructor.name)return Promise.resolve().then(function(){return e()}).then(function(e){if(t)return t(e)}).catch(console.error);var a=e();return a&&"Promise"===a.constructor.name?Promise.resolve().then(function(){return a}).then(function(e){if(t)return t(e)}).catch(console.error):t?t(a):void 0}var e=function(){function e(t){_classCallCheck(this,e),this.data={},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components){var t=!0,a=!1,r=void 0;try{for(var n,o,l=e.components[Symbol.iterator]();!(t=(n=l.next()).done);t=!0)o=n.value,this.define(o)}catch(e){a=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw r}}}}},{key:"renderSlot",value:function(e,t){var a=e.querySelectorAll("slot[name]"),r=!0,n=!1,o=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,d=s.getAttribute("name"),u=t.querySelector("[slot=\""+d+"\"]");u?s.parentNode.replaceChild(u,s):s.parentNode.removeChild(s)}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}var c=e.querySelector("slot:not([name])");if(c&&t.children.length)for(;t.firstChild;)c.parentNode.insertBefore(t.firstChild,c);c&&c.parentNode.removeChild(c)}},{key:"renderTemplate",value:function(e){var t=document.createDocumentFragment();if(e)if("string"==typeof e){var a=document.createElement("div");for(a.innerHTML=e;a.firstChild;)t.appendChild(a.firstChild)}else t.appendChild(e);return t}},{key:"renderStyle",value:function(e,t){if(e){if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)")){var a=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),r=!0,n=!1,o=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,d=s.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),u=new RegExp("var\\("+d[1]+"\\)","g");e=e.replace(d[0],""),e=e.replace(u,d[2])}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}var c=document.createElement("style"),m=document.createTextNode(e);return c.appendChild(m),c}}},{key:"created",value:function(e,t){var a=this,r=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{enumerable:!0,value:r},status:{enumerable:!0,value:"created"}}),e.setAttribute("o-scope",r),b.model.set(r,t.model||{}),b.methods.data[r]=t.methods,!a.compiled||a.compiled&&"O-ROUTER"!==e.parentNode.nodeName){var n=a.renderTemplate(t.template),o=a.renderStyle(t.style,r);o&&n.insertBefore(o,n.firstChild),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(n):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(n):(a.renderSlot(n,e),e.appendChild(n))}b.binder.bind(e),t.created&&t.created.call(e)}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.model=e.model||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return b.model.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},b.model.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return b.methods.data[this.scope]}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),a={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var a=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var r=e.split("/"),n=0,o=r.length;n<o;n++)if("."===r[n]||""===r[n])continue;else".."===r[n]?0<n&&a.splice(n-1,1):a.push(r[n]);return"/"+a.join("/")}},r=function(){function e(t){_classCallCheck(this,e),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&a.base(e.base)}}]),e}(),n={PATH:/\s*\|.*/,PREFIX:/(data-)?o-/,ROOT:/^(https?:)?\/?\//,TYPE:/(data-)?o-|-.*$/g,SPLIT_MODIFIERS:/\s|\s?,\s?/,binderNormalize:function(e){return e?e.replace(/\s+$/,"").replace(/^\s+/,"").replace(/\.{2,}/g,".").replace(/\|{2,}/g,"|").replace(/\,{2,}/g,",").replace(/\s{2,}/g," ").replace(/\s?\|\s?/,"|"):""},binderName:function(e){return e.replace(this.PREFIX,"")},binderType:function(e){return e.replace(this.TYPE,"")},binderNames:function(e){return e.replace(this.PREFIX,"").split("-")},binderValues:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?e.split("."):e.slice(0,t).split(".")},binderModifiers:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?[]:e.slice(t+1).split(this.SPLIT_MODIFIERS)},binderPath:function(e){return this.binderNormalize(e).replace(this.PATH,"")},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var a=!0,r=!1,n=void 0;try{for(var o,l,i=e.attributes[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)l=o.value,t.setAttribute(l.name,l.value)}catch(e){r=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw n}}return t},formData:function(e,t){for(var a=e.querySelectorAll("[o-value]"),r={},n=0,o=a.length;n<o;n++){var l=a[n],i=l.getAttribute("o-value");if(i){i=i.replace(/\s*\|.*/,"");var s=i.split(".").slice(-1);r[s]=this.getByPath(t,i)}}return r},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,a,r){var n=new RegExp("\\$index|\\$"+t,"g");this.walker(e,function(e){if(3===e.nodeType)(e.nodeValue==="$"+t||e.nodeValue==="$index")&&(e.nodeValue=r);else if(1===e.nodeType)for(var o,s=0,i=e.attributes.length;s<i;s++){o=e.attributes[s],o.value=o.value.replace(n,r);var l=o.name,d=o.value.split(" ")[0].split("|")[0];(0===l.indexOf("o-")||0===l.indexOf("data-o-"))&&(d===t||0===d.indexOf(t))&&(o.value=a+"."+r+o.value.slice(t.length))}})},traverse:function(e,t,a){for(var r,n="string"==typeof t?t.split("."):t,o=n.length-1,l=0;l<o;l++){if(r=n[l],!(r in e))if("function"==typeof a)a(e,r,l,n);else return;e=e[r]}return{data:e,key:n[o]}},setByPath:function(e,t,a){for(var r,n="string"==typeof t?t.split("."):t,o=n.length-1,l=0;l<o;l++)r=n[l],r in e||(isNaN(n[l+1])?e[r]={}:e[r]=[]),e=e[r];return e[n[o]]=a},getByPath:function(e,t){for(var a,r="string"==typeof t?t.split("."):t,n=r.length-1,o=0;o<n;o++){if(a=r[o],!(a in e))return;e=e[a]}return e[r[n]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},o=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var a=this.events[e].indexOf(t);-1!==a&&this.events[e].splice(a,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],a=Array.prototype.slice.call(arguments,1),r=0,n=t.length;r<n;r++)t[r].apply(this,a)}}]),e}(),l=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.reads=[],a.writes=[],a.fps=1e3/60,a.pending=!1,a.setup(e),a}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},e.fps=void 0===e.fps||null===e.fps?this.fps:e.fps}},{key:"read",value:function(e,t){var a=t?e.bind(t):e;return this.reads.push(a),this.tick(),a}},{key:"write",value:function(e,t){var a=t?e.bind(t):e;return this.writes.push(a),this.tick(),a}},{key:"tick",value:function(){this.pending||(this.pending=!0,window.requestAnimationFrame(this.flush.bind(this)))}},{key:"flush",value:function(e){var t;try{t=this.runReads(this.reads,e),this.runWrites(this.writes,t)}catch(t){if(this.events.error&&this.events.error.length)this.emit("error",t);else throw t}this.pending=!1,(this.reads.length||this.writes.length)&&this.tick()}},{key:"runWrites",value:function(e,t){for(var a;a=e.shift();)if(a(),t&&e.length===t)return}},{key:"runReads",value:function(e,t){for(var a;a=e.shift();)if(a(),this.fps&&performance.now()-t>this.fps)return e.length}},{key:"remove",value:function(e,t){var a=e.indexOf(t);return!!~a&&!!e.splice(a,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}}]),t}(o),i=function(){function e(t){_classCallCheck(this,e),this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.auth=e.auth||!1,this.method=e.method||"get",this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:function(e){var t="";for(var a in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(a)+"="+encodeURIComponent(e[a]);return t}},{key:"change",value:function(e){var a=this;if(4===e.xhr.readyState){if(e.code=e.xhr.status,e.message=e.xhr.statusText,void 0===e.xhr.response?void 0!==e.xhr.responseText&&(e.data=e.xhr.responseText):e.data=e.xhr.response,"json"===e.responseType&&"string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(e){console.warn(e)}if((401===e.xhr.status||403===e.xhr.status)&&e.auth&&b.keeper.response&&!1===b.keeper.response(e))return;var r=function(){200<=e.xhr.status&&300>e.xhr.status||304==e.xhr.status?e.success?e.success(e):e.handler&&(e.error=!1,e.handler(e)):e.error?e.error(e):e.handler&&(e.error=!0,e.handler(e))};a.response?t(a.response.bind(null,e),function(e){!1!==e&&r()}):r()}}},{key:"fetch",value:function(e){var a=this;if(e=e||{},!e.url)throw new Error("Oxe.fetcher - requires url options");if(e.xhr=new XMLHttpRequest,e.headers=e.headers||{},e.method=e.method||a.method,e.acceptType=e.acceptType||a.acceptType,e.contentType=e.contentType||a.contentType,e.responseType=e.responseType||a.responseType,e.auth=void 0===e.auth||null===e.auth?a.auth:e.auth,e.method=e.method.toUpperCase(),e.xhr.open(e.method,e.url,!0,e.username,e.password),e.contentType)switch(e.contentType){case"js":e.headers["Content-Type"]=a.mime.js;break;case"xml":e.headers["Content-Type"]=a.mime.xml;break;case"html":e.headers["Content-Type"]=a.mime.html;break;case"json":e.headers["Content-Type"]=a.mime.json;break;default:e.headers["Content-Type"]=e.contentType;}if(e.acceptType)switch(e.acceptType){case"js":e.headers.Accept=a.mime.js;break;case"xml":e.headers.Accept=a.mime.xml;break;case"html":e.headers.Accept=a.mime.html;break;case"json":e.headers.Accept=a.mime.json;break;default:e.headers.Accept=e.acceptType;}if(e.responseType)switch(e.responseType){case"text":e.xhr.responseType="text";break;case"json":e.xhr.responseType="json";break;case"blob":e.xhr.responseType="blob";break;case"xml":e.xhr.responseType="document";break;case"html":e.xhr.responseType="document";break;case"document":e.xhr.responseType="document";break;case"arraybuffer":e.xhr.responseType="arraybuffer";break;default:e.xhr.responseType=e.responseType;}if(e.mimeType&&e.xhr.overrideMimeType(e.mimeType),e.withCredentials&&(e.xhr.withCredentials=e.withCredentials),e.headers)for(var r in e.headers)e.xhr.setRequestHeader(r,e.headers[r]);if(!(e.auth&&b.keeper.request&&!1===b.keeper.request(e))){var n=function(){var t;e.data&&("GET"===e.method?e.url=e.url+"?"+a.serialize(e.data):"json"===e.contentType?t=JSON.stringify(e.data):t=e.data),e.xhr.onreadystatechange=a.change.bind(a,e),e.xhr.send(t)};a.request?t(a.request.bind(null,e),function(e){!1!==e&&n()}):n()}}},{key:"post",value:function(e){return e.method="post",this.fetch(e)}},{key:"get",value:function(e){return e.method="get",this.fetch(e)}},{key:"put",value:function(e){return e.method="put",this.fetch(e)}},{key:"head",value:function(e){return e.method="head",this.fetch(e)}},{key:"patch",value:function(e){return e.method="patch",this.fetch(e)}},{key:"delete",value:function(e){return e.method="delete",this.fetch(e)}},{key:"options",value:function(e){return e.method="options",this.fetch(e)}},{key:"connect",value:function(e){return e.method="connect",this.fetch(e)}}]),e}(),s=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=[],e.location={},e.ran=!1,e.auth=!1,e.element=null,e.contain=!1,e.compiled=!1,document.addEventListener("click",e.clickListener.bind(e),!0),window.addEventListener("popstate",e.stateListener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},this.auth=void 0===e.auth?this.auth:e.auth,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else if(e.constructor===Object){if(!e.path)throw new Error("Oxe.router.add - route path required");if(!e.component)throw new Error("Oxe.router.add - route component required");this.data.push(e)}else if(e.constructor===Array)for(var t=0,a=e.length;t<a;t++)this.add(e[t])}},{key:"remove",value:function(e){for(var t=0,a=this.data.length;t<a;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,a=0,r=this.data.length;a<r;a++)if(t=this.data[a],e===t.path)return t}},{key:"find",value:function(e){for(var t,a=0,r=this.data.length;a<r;a++)if(t=this.data[a],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,a=[],r=0,n=this.data.length;r<n;r++)t=this.data[r],this.isPath(t.path,e)&&a.push(t);return a}},{key:"isPath",value:function(e,t){return("/"!==e.slice(0,1)&&(e=a.resolve(e)),!!t)&&("String"===t.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(t||"/"):"RegExp"===t.constructor.name?t.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var a={};if(!e||!t||"/"===e||"/"===t)return a;for(var r=/{|}/g,n=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(n.test(s[d])){var l=s[d].replace(r,"");a[l]=o[d]}return a}},{key:"toQueryString",value:function(e){var t="?";for(var a in e){var r=e[a];t+=a+"="+r+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var a,r=e.split("&"),n=0,o=r.length;n<o;n++)a=r[n].split("="),a[0]&&a[1]&&(t[a[0]]=a[1]);return t}},{key:"toLocationObject",value:function(){return{port:window.location.port||"",host:window.location.host||"",hash:window.location.hash||"",href:window.location.href||"",origin:window.location.origin||"",search:window.location.search||"",pathname:window.location.pathname||"",hostname:window.location.hostname||"",protocol:window.location.protocol||"",username:window.location.username||"",password:window.location.password||""}}},{key:"render",value:function(e){b.utility.ready(function(){if(this.emit("routing"),e.title&&(document.title=e.title),e.description&&b.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&b.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router - missing o-router element");if(!e.element)if(e.load&&b.loader.load(e.load),!e.component)throw new Error("Oxe.router - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(b.component.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e,t){var a;if(t=t||{},t.query&&(e+=this.toQueryString(t.query)),this.compiled||window.history[t.replace?"replaceState":"pushState"]({path:e},"",e),this.location=this.toLocationObject(),this.location.route=this.find(this.location.pathname),!this.location.route)throw new Error("Oxe.router.route - no matching route");return this.location.title=this.location.route.title||"",this.location.query=this.toQueryObject(this.location.search),this.location.parameters=this.toParameterObject(this.location.route.path,this.location.pathname),this.auth&&(!0===this.location.route.auth||void 0===this.location.route.auth)&&!1===b.keeper.route(this.location.route)?void 0:this.location.route.handler?a.handler(this.location.route):this.location.route.redirect?redirect(this.location.route.redirect):void this.render(this.location.route)}},{key:"stateListener",value:function(t){var e=t&&t.state?t.state.path:window.location.href;this.route(e,{replace:!0})}},{key:"clickListener",value:function(t){var e=t.path?t.path[0]:t.target,a=e.parentNode;if(this.contain){for(;a&&"O-ROUTER"!==a.nodeName;)a=a.parentNode;if("O-ROUTER"!==a.nodeName)return}if(!(t.metaKey||t.ctrlKey||t.shiftKey)){for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||this.external&&("RegExp"===this.external.constructor.name&&this.external.test(e.href)||"Function"===this.external.constructor.name&&this.external(e.href)||"String"===this.external.constructor.name&&this.external===e.href)||(this.location.href!==e.href&&this.route(e.href),!this.compiled&&t.preventDefault())}}}]),t}(o),d={_innerHandler:function(e,t,a){return"\\"===a[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},_updateString:function(e,t,a){return a.slice(0,t)+e+a.slice(t+1)},_updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),a=e.indexOf("`",t+1);if(-1===t||-1===a)return e;for(var r,n,o=0,l=0,i=e,s=!1,d=0;d<i.length;d++)n=i[d],"`"===n&&"\\"!==i[d-1]?s?(o++,r="'",s=!1,i=this._updateString(r,d,i),d=this._updateIndex(r,d)):(l++,r="'",s=!0,i=this._updateString(r,d,i),d=this._updateIndex(r,d)):s&&(r=this._innerHandler(n,d,i))&&(i=this._updateString(r,d,i),d=this._updateIndex(r,d));if(i=i.replace(/\${(.*?)}/g,"'+$1+'"),l==o)return i;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,t){for(var r,n=[],o=e.match(this.patterns.imps)||[],s=0,i=o.length;s<i;s++)r=o[s].match(this.patterns.imp),n[s]={raw:r[0],name:r[1],url:a.resolve(r[2],t),extension:a.extension(r[2])},n[s].extension||(n[s].url+=".js");return n},getExports:function(e){for(var t,a=[],r=e.match(this.patterns.exps)||[],n=0,o=r.length;n<o;n++)t=r[n],a[n]={raw:t,default:-1!==t.indexOf("default")};return a},replaceImports:function(e,t){if(!t.length)return e;for(var a=0,r=t.length;a<r;a++){var n=t[a],o=(n.name?"var "+n.name+" = ":"")+"$LOADER.data['"+n.url+"'].result";e=e.replace(n.raw,o)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");var a,r;for(e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n",(a=0,r=t.length);a<r;a++)e=e.replace(t[a].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},u=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},document.addEventListener("load",e.listener.bind(e),!0),e}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),a=new Function("$LOADER","window",t);e.result=a(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)if(200<=a.status&&300>a.status||304==a.status)e.text=a.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(a.responseText)},a.open("GET",e.url),a.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=d.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=d.ast(e)),e.ast&&e.ast.imports.length)for(var a=0,r=e.ast.imports.length,n=function(){a++,a===r&&t()},o=0;o<r;o++)this.load({listener:n,method:e.method,url:e.ast.imports[o].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var a in e.attributes["o-load"]="true",e.attributes)t.setAttribute(a,e.attributes[a]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,t){if("string"==typeof e?e={url:e}:t=e.listener,e.url=a.resolve(e.url),e.url in this.data){var r=this.data[e.url];return void(r.listener.length?t&&r.listener.push(t):(t&&r.listener.push(t),this.ready(r)))}this.data[e.url]=e,e.extension=e.extension||a.extension(e.url),e.listener=t?[t]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}},{key:"listener",value:function(t){var e=t.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var r=a.resolve(e.src||e.href),n=this.data[r];this.ready(n)}}}]),t}(o),c={alt:function(e){b.batcher.write(function(){e.element.alt=""})},each:function(e){b.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},href:function(e){b.batcher.write(function(){e.element.href=""})},class:function(e){b.batcher.write(function(){var t=e.names.slice(1).join("-");e.element.classList.remove(t)})},html:function(e){b.batcher.write(function(){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)})},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){b.batcher.write(function(){e.element.style.cssText=""})},required:function(e){b.batcher.write(function(){e.element.required=!1})},src:function(e){b.batcher.write(function(){e.element.src=""})},text:function(e){b.batcher.write(function(){e.element.innerText=""})},value:function(e){b.batcher.write(function(){var t,a,r,n,o;if("SELECT"===e.element.nodeName)for(o=e.element.options,t=0,a=o.length;t<a;t++)n=o[t],n.selected=!1;else if("radio"===e.element.type)for(r="input[type=\"radio\"][o-value=\""+e.path+"\"]",o=e.element.parentNode.querySelectorAll(r),(t=0,a=o.length);t<a;t++)n=o[t],n.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""})},default:function(){}},m={required:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.required===t||(t=b.utility.binderModifyData(e,t),b.batcher.write(function(){e.element.required=t}))})},disable:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.disabled===t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.disabled=t}))})},enable:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.disabled===!t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.disabled=!t}))})},hide:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.hidden===t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.hidden=t}))})},show:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.hidden===!t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.hidden=!t}))})},read:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.readOnly===t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.readOnly=t}))})},write:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.readOnly===!t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.readOnly=!t}))})},html:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.innerHTML===t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.innerHTML=t}))})},class:function(e){b.batcher.write(function(){var t=b.model.get(e.keys),a=e.names.slice(1).join("-");t=b.binder.modifyData(e,t),e.element.classList.toggle(a,t)})},on:function(a){b.batcher.write(function(){var e=b.utility.getByPath(b.methods.data,a.scope+"."+a.path);e&&"function"==typeof e&&(a.cache?a.element.removeEventListener(a.names[1],function(r){t(a.cache.bind(null,r))}):a.cache=e.bind(a.container),a.element.addEventListener(a.names[1],function(r){t(a.cache.bind(null,r))}))})},css:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element.style.cssText===t||(1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.style.cssText=t}))})},text:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);t=t===void 0||null===t?"":t,t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t=t+""),t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element.innerText=t})})},each:function(e){b.batcher.read(function(){var t=b.model.get(e.keys),a=!!t&&t.constructor===Array,r=!!t&&t.constructor===Object;t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(a&&e.element.children.length===t.length||r&&e.element.children.length===Object.keys(t).length||(t=b.binder.modifyData(e,t),b.batcher.write(function(){for(r&&(t=Object.keys(t));e.element.children.length!==t.length;)if(e.element.children.length>t.length)e.element.removeChild(e.element.children[e.element.children.length-1]);else if(e.element.children.length<t.length){var n,o=e.cache.cloneNode(!0);a?n=e.element.children.length:r&&(n=t[e.element.children.length]),b.utility.replaceEachVariable(o,e.names[1],e.path,n),b.binder.bind(o,e.container),e.element.appendChild(o)}})))})},value:function(e){b.batcher.read(function(){var t,a,r,n,o,l,i,s,d=e.element.type,u=e.element.nodeName;if(e.setup){if(e.setup=!1,l=b.model.get(e.keys),"SELECT"===u){for(s=e.element.options,r=e.element.multiple,l=void 0===l?r?[]:"":l,(n=0,o=s.length);n<o;n++)if(!s[n].disabled)if(!s[n].selected)n!==o-1||r||(l=s[0].value||s[0].innerText||"");else if(r)l.push(s[n].value||s[n].innerText||"");else{l=s[n].value||s[n].innerText||"";break}}else if("radio"===d)for(l=void 0===l?0:l,a="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(a),(n=0,o=s.length);n<o;n++)i=s[n],i.checked=n===l;else if("file"===d)for(l=void 0===l?[]:l,n=0,o=l.length;n<o;n++)e.element.files[n]=l[n];else"checkbox"===d?(t="checked",l=void 0!==l&&l):(t="value",l=void 0===l?"":l);t&&(e.element[t]=b.binder.modifyData(e,l))}else if("SELECT"===u){for(r=e.element.multiple,s=e.element.options,l=r?[]:"",(n=0,o=s.length);n<o;n++)if(i=s[n],i.selected)if(r)l.push(i.value||i.innerText);else{l=i.value||i.innerText;break}}else if("radio"===d)for(a="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(a),(n=0,o=s.length);n<o;n++)i=s[n],e.element===i?(l=n,i.checked=!0):i.checked=!1;else if("file"===d)for(l=l||[],n=0,o=e.element.files.length;n<o;n++)l[n]=e.element.files[n];else l="checkbox"===d?e.element.checked:e.element.value;l!==void 0&&b.model.set(e.keys,l)})},default:function(e){b.batcher.read(function(){var t=b.model.get(e.keys);e.element[e.type]===t||(t=b.binder.modifyData(e,t),b.batcher.write(function(){e.element[e.type]=t}))})}},p=function(){function e(){_classCallCheck(this,e),this.data={},this.values=[],this.submits=[]}return _createClass(e,[{key:"set",value:function(e){if(e=e||{},!e.name)throw new Error("Oxe.render.create - missing name");if(!e.value)throw new Error("Oxe.render.create - missing value");if(!e.element)throw new Error("Oxe.render.create - missing element");if(!e.container)throw new Error("Oxe.render.create - missing container");return e.scope=e.scope||e.container.getAttribute("o-scope"),e.path=e.path||b.utility.binderPath(e.value),e.type=e.type||b.utility.binderType(e.name),e.names=e.names||b.utility.binderNames(e.name),e.values=e.values||b.utility.binderValues(e.value),e.modifiers=e.modifiers||b.utility.binderModifiers(e.value),e.keys=e.keys||[e.scope].concat(e.values),("o-value"===e.name||"data-o-value"===e.name)&&(e.setup=!0),(0===e.name.indexOf("o-each")||0===e.name.indexOf("data-o-each"))&&(e.cache=e.element.removeChild(e.element.firstElementChild)),e}},{key:"get",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return null;if(!(e.path in this.data[e.scope]))return null;t=this.data[e.scope][e.path]}var a=!0,r=!1,n=void 0;try{for(var o,l,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)if(l=o.value,l.element===e.element&&l.name===e.name)return l}catch(e){r=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw n}}return null}},{key:"add",value:function(e){var t;"o-value"===e.name?t=this.values:"o-submit"===e.name?t=this.submits:(!(e.scope in this.data)&&(this.data[e.scope]={}),!(e.path in this.data[e.scope])&&(this.data[e.scope][e.path]=[]),t=this.data[e.scope][e.path]),t.push(e)}},{key:"remove",value:function(e){var t;if("o-value"===e.name)t=this.values;else if("o-submit"===e.name)t=this.submits;else{if(!(e.scope in this.data))return;if(!(e.path in this.data[e.scope]))return;t=this.data[e.scope][e.path]}for(var a=0,r=t.length;a<r;a++)if(t[a].element===e.element)return t.splice(a,1)}},{key:"each",value:function(e,t){var a,r,r=e.split("."),a=r[0],n=this.data[a],o=r.slice(1).join(".");for(var s in n)if(""===o||0===s.indexOf(o)&&(s===o||"."===s.charAt(o.length)))for(var d,u=n[s],c=0,i=u.length;c<i;c++)d=u[c],t(d)}},{key:"unrender",value:function(e){e.type in c&&c[e.type](e)}},{key:"render",value:function(e){e.type in m?m[e.type](e):m.default(e)}},{key:"modifyData",value:function(e,t){if(!e.modifiers.length)return t;if(!b.methods.data[e.scope])return t;var a=!0,r=!1,n=void 0;try{for(var o,l=e.modifiers[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var i=o.value,s=b.methods.data[e.scope];s&&(t=s[i].call(e.container,t))}}catch(e){r=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}return t}},{key:"skipChildren",value:function(e){if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!0;var t=!0,a=!1,r=void 0;try{for(var n,o,l=e.attributes[Symbol.iterator]();!(t=(n=l.next()).done);t=!0)if(o=n.value,0===o.name.indexOf("o-each")||0===o.name.indexOf("data-o-each"))return!0}catch(e){a=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw r}}return!1}},{key:"eachElement",value:function(e,t,a){var r=t.getAttribute("o-scope")||t.getAttribute("data-o-scope"),n=e.getAttribute("o-scope")||e.getAttribute("data-o-scope");if("O-ROUTER"===e.nodeName||e.hasAttribute("o-scope")||e.hasAttribute("o-setup")||e.hasAttribute("o-router")||e.hasAttribute("o-compiled")||e.hasAttribute("o-external")||e.hasAttribute("data-o-scope")||e.hasAttribute("data-o-setup")||e.hasAttribute("data-o-router")||e.hasAttribute("data-o-compiled")||e.hasAttribute("data-o-external")||a.call(this,e),(!n||n===r)&&!1===this.skipChildren(e)){var o=!0,l=!1,i=void 0;try{for(var s,d,u=e.children[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)d=s.value,this.eachElement(d,t,a)}catch(e){l=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(l)throw i}}}}},{key:"eachAttribute",value:function(e,t){var a=!0,r=!1,n=void 0;try{for(var o,l,i=e.attributes[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)l=o.value,(l&&l.value&&0===l.name.indexOf("o-")||0===l.name.indexOf("data-o-"))&&t.call(this,l)}catch(e){r=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"unbind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(a){var r=this.get({element:e,container:t,name:a.name,value:a.value,scope:t.getAttribute("o-scope"),path:b.utility.binderPath(a.value)});this.remove(r),this.unrender(r)})})}},{key:"bind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(a){var r=this.set({element:e,container:t,name:a.name,value:a.value});this.add(r),this.render(r)})})}}]),e}(),h=function(){function e(t){_classCallCheck(this,e),this._user,this._token,this.scheme="Session",this.type="sessionStorage",Object.defineProperties(this,{token:{enumerable:!0,get:function(){return this._token=this._token||window[this.type].getItem("token")}},user:{enumerable:!0,get:function(){return this._user=this._user||JSON.parse(window[this.type].getItem("user"))}}}),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this._forbidden=e.forbidden||this._forbidden,this._unauthorized=e.unauthorized||this._unauthorized,this._authenticated=e.authenticated||this._authenticated,this._unauthenticated=e.unauthenticated||this._unauthenticated,e.type&&(this.type=e.type+"Storage"),e.scheme&&(this.scheme=e.scheme.slice(0,1).toUpperCase()+e.scheme.slice(1).toLowerCase())}},{key:"setToken",value:function(e){e&&("Basic"===this.scheme&&(e=this.encode(e)),this._token=window[this.type].setItem("token",e))}},{key:"setUser",value:function(e){e&&(e=JSON.stringify(e),this._user=window[this.type].setItem("user",e))}},{key:"removeToken",value:function(){this._token=null,window[this.type].removeItem("token")}},{key:"removeUser",value:function(){this._user=null,window[this.type].removeItem("user")}},{key:"authenticate",value:function(e,t){this.setToken(e),this.setUser(t),"string"==typeof this._authenticated?b.router.route(this._authenticated):"function"==typeof this._authenticated&&this._authenticated()}},{key:"unauthenticate",value:function(){this.removeToken(),this.removeUser(),"string"==typeof this._unauthenticated?b.router.route(this._unauthenticated):"function"==typeof this._unauthenticated&&this._unauthenticated()}},{key:"forbidden",value:function(e){return"string"==typeof this._forbidden?b.router.route(this._forbidden):"function"==typeof this._forbidden&&this._forbidden(e),!1}},{key:"unauthorized",value:function(e){return"string"==typeof this._unauthorized?b.router.route(this._unauthorized):"function"==typeof this._unauthorized&&this._unauthorized(e),!1}},{key:"route",value:function(e){return!1===e.auth||"Session"===this.scheme||!!this.token||this.unauthorized(e)}},{key:"request",value:function(e){return!1===e.auth||"Session"===this.scheme||(this.token?(e.xhr.setRequestHeader("Authorization",this.scheme+" "+this.token),!0):this.unauthorized(e))}},{key:"response",value:function(e){return 401===e.code?this.unauthorized(e):403!==e.code||this.forbidden(e)}},{key:"encode",value:function(e){return window.btoa(e)}},{key:"decode",value:function(e){return window.atob(e)}}]),e}(),y={splice:function(){var e=arguments[0],t=arguments[1],a=2<arguments.length?arguments.length-2:0;if("number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var r=this.$meta.length,n=void 0,o=void 0,l=void 0,i=void 0,s=2,d=arguments.length-s,u=this.slice(e,t);if(i=r-1-e,0<i)for(o=e;i--;)n=o++,l=d&&s<d?arguments[s++]:this.$meta[o],this.$meta[n]=y.create(l,this.$meta.listener,this.$meta.path+n),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<a)for(;a--;)n=this.length,this.$meta[n]=y.create(arguments[s++],this.$meta.listener,this.$meta.path+n),y.defineProperty(this,n),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<t)for(;t--;)this.$meta.length--,this.length--,n=this.length,this.$meta.listener(n,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+n,n);return u},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,a){if(a!==this[t]){var r=e.create(a,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=r,e.defineProperty(this,t),this.$meta.listener(r,this.$meta.path+t,t),r}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var a=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),a}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(a){a!==this.$meta[e]&&(this.$meta[e]=t.create(a,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,a){var r=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;a=a?a+".":"";var n=void 0,o=void 0,l=e.constructor,i=e.constructor(),s=e.constructor();if(s.$meta={value:e.constructor()},s.$meta.value.path=a,s.$meta.value.listener=t,l===Array){for(n=0,o=e.length;n<o;n++)s.$meta.value[n]=r.create(e[n],t,a+n),s[n]=r.property(n);var d=r.arrayProperties();for(n in d)s[n]=d[n]}if(l===Object)for(n in e)s.$meta.value[n]=r.create(e[n],t,a+n),s[n]=r.property(n);var u=r.objectProperties();for(n in u)s[n]=u[n];return Object.defineProperties(i,s)}},f=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.GET=2,e.SET=3,e.REMOVE=4,e.ran=!1,e.data=y.create({},e.listener),e}return _inherits(t,e),_createClass(t,[{key:"traverse",value:function(e,t,a){"string"==typeof t&&(t=[t]);for(var r,n=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in n)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&n.$set(t[s],isNaN(t[s+1])?{}:[])}n=n[t[s]]}return e===this.SET?r=n.$set(o,a):e===this.GET?r=n[o]:e===this.REMOVE&&(r=n[o],n.$remove(o)),r}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t){var a=void 0===e?"unrender":"render";b.binder.each(t,function(e){b.binder[a](e)})}}]),t}(o),b={compiled:!1};Object.defineProperties(b,{window:{enumerable:!0,get:function(){return window}},document:{enumerable:!0,get:function(){return window.document}},body:{enumerable:!0,get:function(){return window.document.body}},head:{enumerable:!0,get:function(){return window.document.head}},location:{enumerable:!0,get:function(){return this.router.location}},currentScript:{enumerable:!0,get:function(){return window.document._currentScript||window.document.currentScript}},ownerDocument:{enumerable:!0,get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},global:{enumerable:!0,value:{}},methods:{enumerable:!0,value:{data:{}}},utility:{enumerable:!0,value:n},setup:{enumerable:!0,value:function(e){this._setup||(this._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&this.general.setup(e.general),e.keeper&&this.keeper.setup(e.keeper),e.fetcher&&this.fetcher.setup(e.fetcher),e.loader&&this.loader.setup(e.loader),e.component&&this.component.setup(e.component),e.router&&this.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())}}}),Object.defineProperty(b,"general",{enumerable:!0,value:new r}),Object.defineProperty(b,"batcher",{enumerable:!0,value:new l}),Object.defineProperty(b,"loader",{enumerable:!0,value:new u}),Object.defineProperty(b,"binder",{enumerable:!0,value:new p}),Object.defineProperty(b,"fetcher",{enumerable:!0,value:new i}),Object.defineProperty(b,"keeper",{enumerable:!0,value:new h}),Object.defineProperty(b,"component",{enumerable:!0,value:new e}),Object.defineProperty(b,"router",{enumerable:!0,value:new s}),Object.defineProperty(b,"model",{enumerable:!0,value:new f}),document.addEventListener("reset",function(t){var e=t.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit"),r=b.binder.get({name:"o-submit",element:e}),n=r.scope;if(a)for(var o=e.querySelectorAll("[o-value]"),l=o.length;l--;){var i=o[l].getAttribute("o-value"),s=[n].concat(i.split("."));b.model.set(s,""),b.binder.unrender({name:"o-value",element:o[l]},"view")}},!0),document.addEventListener("submit",function(a){var e=a.target,r=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(r){a.preventDefault();var n=b.binder.get({name:"o-submit",element:e}),o=n.scope,l=n.container,i=b.model.data[o],s=b.utility.formData(e,i),d=b.utility.getByPath(l.methods,r),u=function(t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){var a=e.getAttribute("o-auth")||e.getAttribute("data-o-auth"),r=e.getAttribute("o-action")||e.getAttribute("data-o-action"),n=e.getAttribute("o-method")||e.getAttribute("data-o-method"),o=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");t.url=t.url||r,t.method=t.method||n,t.auth=void 0===t.auth||null===t.auth?a:t.auth,t.contentType=void 0===t.contentType||null===t.contentType?o:t.contentType,b.fetcher.fetch(t)}(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.reset||e.hasAttribute("o-reset"))&&e.reset()};t(d.bind(l,s,a),u)}},!0),document.addEventListener("input",function(t){if("checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&t.target.hasAttribute("o-value")){var e=b.binder.get({name:"o-value",element:t.target});b.binder.render(e)}},!0),document.addEventListener("change",function(t){if(t.target.hasAttribute("o-value")){var e=b.binder.get({name:"o-value",element:t.target});b.binder.render(e)}},!0);var v=document.createElement("style"),g=document.createTextNode(" \to-router, o-router > :first-child { \t\tdisplay: block; \t} \to-router, [o-scope] { \t\tanimation: o-transition 150ms ease-in-out; \t} \t@keyframes o-transition { \t\t0% { opacity: 0; } \t\t100% { opacity: 1; } \t} ");v.setAttribute("type","text/css"),v.appendChild(g),document.head.appendChild(v);var k=0,x=0,T=!1,E=function(){if(!T&&k==x){T=!0;var e=document.querySelector("script[o-setup]");if(e){var t=e.getAttribute("o-setup").split(/\s*,\s*/),a=document.querySelector("meta[name=\"oxe\"]");a&&a.hasAttribute("compiled")&&(t[1]="null",t[2]="script",b.compiled=!0,b.router.compiled=!0,b.component.compiled=!0),b.loader.load({url:t[0],method:t[2],transformer:t[1]})}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})}};if("Promise"in window&&"fetch"in window)E();else{x++;var O=document.createElement("script");O.setAttribute("src","https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch,promise"),O.addEventListener("load",function(){k++,E()},!0),document.head.appendChild(O)}if("registerElement"in document&&"content"in document.createElement("template"))E();else{x++;var O=document.createElement("script");O.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js"),O.addEventListener("load",function(){k++,E()},!0),document.head.appendChild(O)}return b});